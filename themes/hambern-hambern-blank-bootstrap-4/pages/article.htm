title = "article"
url = "/article/:slug"
layout = "default"
is_hidden = 0
child_of = "news"
hide_crumb = 0
remove_crumb_trail = 0
crumbElementTitle = "page-title"
crumb_disabled = 0

[viewBag]

[blogPost]
slug = "{{ :slug }}"
categoryPage = "article"

[genericForm newsletter]
messages_success = "Your form was successfully submitted"
messages_errors = "There were errors with your submission"
inline_errors = "disabled"
sanitize_data = "disabled"
anonymize_ip = "disabled"
recaptcha_theme = "light"
recaptcha_type = "image"
recaptcha_size = "normal"
==
<?php
function onEnd() {
    
    // get the post component
    $_post = $this->components['blogPost'];
    $_post = $_post->post; // post is the alias of my component

    // get the title
    $_title = $_post->title;
    
    // update the page title
    $this->page->title = $_title;
    
    /*
    // get the published date
    if(!empty($_post->published_at) && isset($_post->published_at)) {
        $_published_at = $_post->published_at->format('d F Y');
        
        // update the page banner image
        $this->page->description = $_published_at;
    }
    */
    
    // get featured image
    if(isset($_post->featured_images[0]) && !empty($_post->featured_images[0])) {
      $_featured_image = $_post->featured_images[0]['path'];  
      
      // update featured image
      $this->page->banner_image = $_featured_image;
    }
    
    
}
?>
==
<div class="container-60 m-b-3">

            <p class="info">{{ post.published_at|date('d F Y')|capitalize}}</p>
            <h2>{{ post.title }}</h2>
            <div class="content m-b-3">{{ post.content_html|raw }}</div>
                
               {% if post.featured_images.count != 0 %}
               <div class="row">
                {% for image in post.featured_images %}
                	{% if loop.index is divisible by(4) or loop.first %}
                	<a class="item col-lg-6 col-md-8" href="{{ image.path }}" data-toggle="lightbox" data-gallery="example-gallery">
                	    <div class="lightbox-image">
                		    <div class="bg" style="background-image: url('{{ image.path|resize(500,500)}}');"></div>
                		</div>
                	</a> 
                	{% else %}
                	<a class="item col-lg-3 col-md-4" href="{{ image.path }}" data-toggle="lightbox" data-gallery="example-gallery">
                	    <div class="lightbox-image">
                		    <div class="bg" style="background-image: url('{{ image.path|resize(500,500)}}');"></div>
                		</div>
                	</a> 
                	{% endif %}

                {% endfor %}
                </div>
            {% endif %}     

</div>


{% put styles %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" rel="stylesheet">
{% endput %}

{% put scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.js"></script>
    <script>
    $(document).on('click', '[data-toggle="lightbox"]', function(event) {
                event.preventDefault();
                $(this).ekkoLightbox();
            });
    </script>
{% endput %}