title = "article"
url = "/article/:slug"
layout = "default"
is_hidden = 0
child_of = "news"
hide_crumb = 0
remove_crumb_trail = 0
crumbElementTitle = "page-title"
crumb_disabled = 0

[viewBag]

[blogPost]
slug = "{{ :slug }}"
categoryPage = "article"
==
<?php
function onEnd() {
    
    // get the post component
    $_post = $this->components['blogPost'];
    $_post = $_post->post; // post is the alias of my component

    // get the title
    $_title = $_post->title;
    
    // update the page title
    $this->page->title = $_title;
    
    /*
    // get the published date
    if(!empty($_post->published_at) && isset($_post->published_at)) {
        $_published_at = $_post->published_at->format('d F Y');
        
        // update the page banner image
        $this->page->description = $_published_at;
    }
    */
    
    // get featured image
    if(isset($_post->featured_images[0]) && !empty($_post->featured_images[0])) {
      $_featured_image = $_post->featured_images[0]['path'];  
      
      // update featured image
      $this->page->banner_image = $_featured_image;
    }
    
    
}
?>
==
<div class="container m-b-3">

            <p class="info">{{ post.published_at|date('d F Y')|capitalize}}</p>
            <h2>{{ post.title }}</h2>
            <div class="content">{{ post.content_html|raw }}</div>

               {% if post.featured_images.count != 0 %}
                {% for image in post.featured_images %}
                	<a class="item col" href="{{ image.path }}" data-toggle="lightbox" data-gallery="example-gallery">
                		<img class="img-fluid" title="{{image.title}}" src="{{ image.path }}" alt="">
                	</a>				
                {% endfor %}
            {% endif %}     


</div>

{% partial 'contact' %}

{% partial 'related_news' %}

{% put styles %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" rel="stylesheet">
{% endput %}

{% put scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.js"></script>
    <script>$(document).on('click', '[data-toggle="lightbox"]', function(event) {
                event.preventDefault();
                $(this).ekkoLightbox();
            });
    </script>
{% endput %}